<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="ko" xmlns="http://www.w3.org/1999/xhtml">
	<head>
	    <meta charset="utf-8"/>
	    <title>구글 애널리틱스 이벤트 추적하기</title>
	    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
	    <meta name="description" content="DevOps를 위한 정보 제공"/>
	    <meta name="author" content="appaga@appaga.kr"/>
	    <meta name="keywords" content="java, spring framework, spring boot, android, flutter"/>
	    <meta name="generator" content="JBake"/>

	    <!-- Le styles -->
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
	    <link href="../../css/asciidoctor.css" rel="stylesheet"/>
	    <link href="../../css/base.css" rel="stylesheet"/>
	    <link href="../../css/prettify.css" rel="stylesheet"/>

	    <!-- Fav and touch icons -->
		<link rel="apple-touch-icon" sizes="180x180" href="../../apple-touch-icon.png"/>
		<link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png"/>
		<link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png"/>
		<link rel="manifest" href="../../site.webmanifest"/>
	    <link rel="shortcut icon" href="../../favicon.ico"/>

		<!-- Global site tag (gtag.js) - Google Analytics -->
		<script async src="https://www.googletagmanager.com/gtag/js?id=G-VB6XQ6972F"></script>
		<script>
		  window.dataLayer = window.dataLayer || [];
		  function gtag(){dataLayer.push(arguments);}
		  gtag('js', new Date());

		  gtag('config', 'G-VB6XQ6972F');
		</script>
	</head>
	<body onload="prettyPrint()">
	<div id="wrap">
		<div>
		<div class="container">
		  <header class="blog-header py-3">
		    <div class="row flex-nowrap justify-content-between align-items-center">
		      <div class="col-4 pt-1">
						<a class="link-secondary" href="../../feed.xml">Subscribe</a>
		      </div>
		      <div class="col-4 text-center">
		        <a class="blog-header-logo text-dark" href="/">APPAGA</a>
		      </div>
		      <div class="col-4 d-flex justify-content-end align-items-center">
		        <a href="../../about.html">About</a>
		      </div>
		    </div>
		  </header>

		  <div class="nav-scroller py-1 mb-2">
		    <nav class="nav d-flex justify-content-between">
						<!-- <a class="p-2 link-secondary" th:with="rootpath=(${content.rootpath} ?: '')" th:href="${rootpath}+'tags/mongodb.html'">Mongodb</a> -->
						<a class="p-2 link-secondary" href='../../archive.html'>Archive</a>
		    </nav>
		  </div>
		</div>
	</div>
		<main class="container">

			<div class="page-header">
				<h1>구글 애널리틱스 이벤트 추적하기</h1>
			</div>

			<p><em>30 April 2020</em></p>

			<p><p>웹사이트에 방문한 사용자가 웹사이트에서 어떤 요소 또는 항목을 사용했는지 추적하기 위해서 구글 애널리틱스의 이벤트 추적기능을 사용한다.</p>
<p>이벤트 추적에는 4개의 항목을 사용한다.<br />
4개의 항목을 이용하여 사용자가 웹페이지를 어떻게 이용했는지 표현될 수 있도록 정의한다.</p>
<ul>
<li><strong>category</strong> : 필수. 추적하고자 하는 항목의 그룹.</li>
<li><strong>action</strong>   : 필수. 추적 행동. <code>링크를 클릭한다</code>와 같은 행위를 표현한다.</li>
<li><strong>label</strong>    : 선택사항(필수로 사용하길 권장함). 추적 해동에 대한 기술. <code>클릭한 링크의 주소</code> 등의 값을 사용한다.</li>
<li><strong>value</strong>    : 선택사항. 정수값을 이용한다. <code>동영상을 플레이한 시간</code> 등의 값이 사용된다.</li>
</ul>
<p>꼭 위에 기술된 내용에 맞게 정의할 필요는 없고 이벤트 추적에 도움이 되도록 자신만의 규칙으로 설정하면 된다.</p>
<h2>gtag.js 애널리틱스 자바스크립트를 사이트에 추가하기</h2>
<p>기존 <code>analytics.js</code>가 아닌 새로운 방식의 <code>gtag.js</code>를 이용하도록 한다.<br />
<code>analytics.js</code>에서 <code>gtag.js</code>로 변경하는 방법은 아래 링크에 잘 나와있다.</p>
<p><a href="https://developers.google.com/analytics/devguides/collection/gtagjs/migration">Migrate from analytics.js to gtag.js</a></p>
<p>구글애널리틱스에 등록한 구글애널리틱스ID(<code>GA_MEASUREMENT_ID</code>) 값을 이용하여 아래 스크립트를 웹사이트 헤더에 추가한다.<br />
<code>sendGaEvent()</code>는 웹사이트에서 공통으로 호출한 함수를 정의한 것으로 실제로는 <code>gtag()</code> 함수를 호출하는 역할을 할 뿐이다.</p>
<pre><code class="prettyprint language-javascript">&lt;script async src=&quot;https://www.googletagmanager.com/gtag/js?id=GA_MEASUREMENT_ID&quot;&gt;&lt;/script&gt;
&lt;script&gt;
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'GA_MEASUREMENT_ID');
  
  function sendGaEvent(category, action, label, value) {
	  gtag('event', action||'ACTION', {
		'event_category': category||'CATEGORY',
		'event_label': label||'',
		'value': value||''
	  });
  }
&lt;/script&gt;
</code></pre>
<h2>이벤트 등록하기</h2>
<p>아래 예시와 같이 링크를 클릭하면 <code>sendGaEvent()</code> 함수를 호출하여 구글애널리틱스에 이벤트를 추적하도록 한다.</p>
<pre><code class="prettyprint language-html">&lt;a href=&quot;/category/event&quot; onclick=&quot;sendGaEvent('메뉴', 'click', '이벤트보기')&quot;&gt;이벤트보기&lt;/a&gt;
</code></pre>
</p>

			<hr />

		</main>
	</div>
	<div>
			<div id="push"></div>

		    <footer class="blog-footer">
		      <div class="container">
		        <p class="muted credit">&copy; 2022 APPAGA.KR</p>
		      </div>
		    </footer>

		    <!-- javascript. Placed at the end of the document so the pages load faster -->
			<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
			<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script>
		    <script src="../../js/prettify.js"></script>

    	</div>
  </body>
</html>
