<!DOCTYPE html><html lang="ko"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Apache 2.x + Tomcat 설정 - Appaga</title><meta name="description" content="apache 2.x에서 SSL 설정과 tomcat으로 proxy 하는 아파치 설정이다. 80 포트로 접속을 시도하면 443 포트로 리다이렉트 하도록 설정하여 언제나 https:// 프로토콜로 제공되도록 한다. tomcat으로 proxy하여 원하는 url을 tomcat에서 제공하도록 설정한다. 만약 tomcat으로 proxy 하지 않도록 하려면 느낌표 !로 proxy에서 예외처리 한다. http://로 접속을 시도하면 https://로&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://appaga.kr/apache001/"><link rel="alternate" type="application/atom+xml" href="https://appaga.kr/feed.xml"><link rel="alternate" type="application/json" href="https://appaga.kr/feed.json"><meta property="og:title" content="Apache 2.x + Tomcat 설정"><meta property="og:image" content="https://appaga.kr/media/website/android-chrome-192x192.png"><meta property="og:site_name" content="Appaga"><meta property="og:description" content="apache 2.x에서 SSL 설정과 tomcat으로 proxy 하는 아파치 설정이다. 80 포트로 접속을 시도하면 443 포트로 리다이렉트 하도록 설정하여 언제나 https:// 프로토콜로 제공되도록 한다. tomcat으로 proxy하여 원하는 url을 tomcat에서 제공하도록 설정한다. 만약 tomcat으로 proxy 하지 않도록 하려면 느낌표 !로 proxy에서 예외처리 한다. http://로 접속을 시도하면 https://로&hellip;"><meta property="og:url" content="https://appaga.kr/apache001/"><meta property="og:type" content="article"><link rel="shortcut icon" href="https://appaga.kr/media/website/favicon.ico" type="image/x-icon"><style>:root{--body-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";--heading-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";--logo-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";--menu-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol"}</style><link rel="stylesheet" href="https://appaga.kr/assets/css/style.css?v=80f08997cb9d693fae8e4efe21de1c18"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://appaga.kr/apache001/"},"headline":"Apache 2.x + Tomcat 설정","datePublished":"2022-04-03T08:56","dateModified":"2022-04-03T09:21","image":{"@type":"ImageObject","url":"https://appaga.kr/media/website/android-chrome-192x192.png","height":192,"width":192},"description":"apache 2.x에서 SSL 설정과 tomcat으로 proxy 하는 아파치 설정이다. 80 포트로 접속을 시도하면 443 포트로 리다이렉트 하도록 설정하여 언제나 https:// 프로토콜로 제공되도록 한다. tomcat으로 proxy하여 원하는 url을 tomcat에서 제공하도록 설정한다. 만약 tomcat으로 proxy 하지 않도록 하려면 느낌표 !로 proxy에서 예외처리 한다. http://로 접속을 시도하면 https://로&hellip;","author":{"@type":"Person","name":"appaga","url":"https://appaga.kr/authors/appaga/"},"publisher":{"@type":"Organization","name":"appaga","logo":{"@type":"ImageObject","url":"https://appaga.kr/media/website/android-chrome-192x192.png","height":192,"width":192}}}</script></head><body><div class="site-container"><header class="top" id="js-header"><a class="logo" href="https://appaga.kr/"><img src="https://appaga.kr/media/website/android-chrome-192x192.png" alt="Appaga" width="192" height="192"></a></header><main><article class="post"><div class="hero"><header class="hero__content"><div class="wrapper"><div class="post__meta"><time datetime="2022-04-03T08:56">4월 3, 2022</time></div><h1>Apache 2.x + Tomcat 설정</h1><div class="post__meta post__meta--author"><img src="https://appaga.kr/media/website/android-chrome-192x192-2.png" loading="eager" alt="appaga" class="post__author-thumb"> <a href="https://appaga.kr/authors/appaga/" class="feed__author invert">appaga</a></div></div></header></div><div class="wrapper post__entry"><p>apache 2.x에서 SSL 설정과 tomcat으로 proxy 하는 아파치 설정이다.</p><p><code>80</code> 포트로 접속을 시도하면 <code>443</code> 포트로 리다이렉트 하도록 설정하여 언제나 <code>https://</code> 프로토콜로 제공되도록 한다.</p><p>tomcat으로 proxy하여 원하는 url을 tomcat에서 제공하도록 설정한다. 만약 tomcat으로 proxy 하지 않도록 하려면 느낌표 <code>!</code>로 proxy에서 예외처리 한다.</p><h2 id="80-포트를-443-포트로-리다이렉트">80 포트를 443 포트로 리다이렉트</h2><p><code>http://</code>로 접속을 시도하면 <code>https://</code>로 전환되도록 설정한다.</p><h3 id="redirect-속성으로-하는-방법"><code>Redirect</code> 속성으로 하는 방법</h3><pre><code class="language-xml">&lt;VirtualHost *:80&gt;
ServerName appaga.kr
Redirect permanent / https://appaga.kr/
&lt;/VirtualHost&gt;
</code></pre><h3 id="rewriteengine-으로-하는-방법"><code>RewriteEngine</code> 으로 하는 방법</h3><pre><code class="language-xml">&lt;VirtualHost *:80&gt;
ServerName appaga.kr
RewriteEngine On
RewriteCond %{HTTPS} off
RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [R,L]
&lt;/VirtualHost&gt;
</code></pre><h2 id="443-포트-ssl-설정">443 포트 SSL 설정</h2><p>발급받은 SSL 인증서 파일들을 <code>/etc/httpd/ssl/2020/</code> 폴더에 저장하여 사용한다.</p><p>tomcat은 8080 포트로 실행 중이며 proxy를 이용하여 모든 요청을 tomcat으로 전달 시킨다.</p><p>만약 tomcat으로 proxy 하지 않도록 하려면 <code>ProxyPass /resources !</code> 처럼 느낌표 <code>!</code>로 proxy에서 예외처리 한다.</p><pre><code class="language-xml">Listen 443 https
SSLPassPhraseDialog exec:/usr/libexec/httpd-ssl-pass-dialog
SSLSessionCache         shmcb:/run/httpd/sslcache(512000)
SSLSessionCacheTimeout  300

SSLRandomSeed startup file:///dev/urandom  256
SSLRandomSeed connect builtin

SSLCryptoDevice builtin

&lt;VirtualHost *:443&gt;
    ServerAdmin webmaster@localhost
    DocumentRoot /var/www/html
    ServerName appaga.kr

    ErrorLog logs/error.log
    CustomLog logs/access.log combined

    SSLEngine on
    SSLProtocol all -SSLv2 -SSLv3
    SSLCipherSuite ECDHE-RSA-AES128-SHA256:AES128-GCM-SHA256:!RC4:HIGH:!MD5:!aNULL:!EDH

    SSLCertificateFile      /etc/httpd/ssl/2020/appaga.kr.crt
    SSLCertificateKeyFile   /etc/httpd/ssl/2020/appaga.kr.key
    SSLCACertificateFile /etc/httpd/ssl/2020/appaga.kr.crt

    ProxyRequests Off
    ProxyPreserveHost On

    &lt;Proxy *&gt;
        Order deny,allow
        Allow from all
    &lt;/Proxy&gt;

    ProxyPass /resources !
    ProxyPass / http://127.0.0.1:8080/
    ProxyPassReverse / http://127.0.0.1:8080/
    &lt;Location /&gt;
        Order allow,deny
        Allow from all
    &lt;/Location&gt;

&lt;/VirtualHost&gt;
</code></pre></div><footer class="wrapper post__footer"><p class="post__last-updated">This article was updated on 4월 3, 2022</p><ul class="post__tag"><li><a href="https://appaga.kr/tags/apache/">apache</a></li><li><a href="https://appaga.kr/tags/tomcat/">tomcat</a></li></ul><div class="post__share"></div><div class="post__bio bio"><img class="bio__avatar" src="https://appaga.kr/media/website/android-chrome-192x192-2.png" loading="lazy" alt="appaga"><div class="bio__info"><h3 class="bio__name"><a href="https://appaga.kr/authors/appaga/" class="invert" rel="author">appaga</a></h3></div></div></footer></article><nav class="post__nav"><div class="post__nav-inner"><div class="post__nav-prev"><svg width="1.041em" height="0.416em" aria-hidden="true"><use xlink:href="https://appaga.kr/assets/svg/svg-map.svg#arrow-prev"/></svg> <a href="https://appaga.kr/javascript-obfuscator-tool-obfuscatorio/" class="invert post__nav-link" rel="prev"><span>Previous</span> JavaScript Obfuscator Tool: obfuscator.io</a></div></div></nav></main><footer class="footer"><div class="footer__copyright"><p>© 2021 APPAGA.KR, Powered by <a href="https://getpublii.com" target="_blank" rel="nofollow noopener">Publii</a></p></div><button class="footer__bttop js-footer__bttop" aria-label="Back to top"><svg><title>Back to top</title><use xlink:href="https://appaga.kr/assets/svg/svg-map.svg#toparrow"/></svg></button></footer></div><script>window.publiiThemeMenuConfig = {    
        mobileMenuMode: 'sidebar',
        animationSpeed: 300,
        submenuWidth: 'auto',
        doubleClickTime: 500,
        mobileMenuExpandableSubmenus: true, 
        relatedContainerForOverlayMenuSelector: '.top',
   };</script><script defer="defer" src="https://appaga.kr/assets/js/scripts.min.js?v=f4c4d35432d0e17d212f2fae4e0f8247"></script><script>var images = document.querySelectorAll('img[loading]');

        for (var i = 0; i < images.length; i++) {
            if (images[i].complete) {
                images[i].classList.add('is-loaded');
            } else {
                images[i].addEventListener('load', function () {
                    this.classList.add('is-loaded');
                }, false);
            }
        }</script></body></html>